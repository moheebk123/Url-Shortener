<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/style.css">
    <title>Login</title>
</head>
<body>
  <%- include("layout/header.ejs") %>

  <% if (successes && successes.length > 0) { %>
    <% successes.forEach((success) => { %>
    <p class="flash-success"><%= success %></p>
    <% }) %>
  <% } %>

  <div id="main">
    <form action="/login" class="input-box" method="post">
      <h2>Login</h2>
      <div>
        <input type="email" name="email" placeholder="Enter your email" required>
        <input type="password" name="password" placeholder="Enter your password" required>
        <a href="/reset-password">Forget Password?</a>
        <br/>
        <br/>
        <button>Login</button>
        <div class="oauth-box">
          <a href="/oauth/google">
            <img src="/google.png" alt="Google Icon" class="google">
          </a>
          <a href="/oauth/github">
            <img src="/github.png" alt="GitHub Icon" class="github">
          </a>
        </div>
        <h3>Don't have an account <a href="/register">Register</a></h3>
        <% if (errors && errors.length > 0) { %>
          <% errors.forEach((error) => { %>
            <p class="flash-error"><%= error %></p>
          <% }) %>
          <% } %>
      </div>
    </form>
  </div>

  <script>
    setTimeout(() => {
      const successes = document.querySelectorAll('.flash-success');
      if (successes.length > 0) {
        successes.forEach(success => {
          success.style.display = 'none';
        });
      }

      const errors = document.querySelectorAll('.flash-error');
      if (errors.length > 0) {
        errors.forEach(error => {
          error.style.display = 'none';
        });
      }
    }, 5000);
  </script>
</body>
</html>